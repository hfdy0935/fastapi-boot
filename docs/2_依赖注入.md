**类似SpringBoot、Nest的依赖注入**

:pushpin:**主要工具**
- `Controller`，在`provide_app`函数的参数中提供
- `Injectable`，收集实例，使其可被注入
- `inject`，运行时注入依赖
- `Bean`，注入实例


:pushpin:**收集方式**
1. 方式：**（1）类型（2）类型+名字**
2. 写法
    - 被`Injectable`装饰的**类**，会把**类的实例**收集起来

```python
from fastapi_boot.core import Injectable

@Injectable
class Cls1:...

@Injectable('xxx')
class Cls2:...

@Bean
def foo() -> User:
   return User(name='foo', age=18)

@Bean('bar')
def bar() -> User:
   return User(name='bar', age=19)
```

:pushpin:**注入方式**
1. 方式：**（1）类型（2）类型+名字**
2. 写法：
    - 使用`inject`
    - 被`Controller`、`Injectable`装饰的类的`__init__`方法中声明
    - `dataclass`和`pydantic.BaseModel`的参数
    - 被`Bean`装饰的函数的参数

```python
# 1. 直接注入
# 1.1 按类型
ins1 = inject(XxxClass)

# 1.2 按类型和名字
ins2 = inject(XxxClass, 'cls1')


# 2. __init__注入
@Injectable
class _:
    def __init__(self, ins1: XxxClass, ins2: Annotated[XxxClass, 'cls1']):
        assert ins1 == ins2

@Injectable
@dataclass
class _:
    ins1: XxxClass
    ins2: Annotated[XxxClass, 'cls1']

# 3. 被Bean装饰的函数参数注入
@Bean('四大名著')
def fn5(
    book1: Annotated[Book, '三国演义'],
    book2: Annotated[Book, '水浒传'],
    book3: Annotated[Book, '红楼梦'],
    book4: Annotated[Book, '西游记'],
) -> list[Book]:
    return [book1, book2, book3, book4]
```
